<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project Solar">
	<target name="create_run_jar">

		<tstamp>
			<format property="now_build" pattern="MM.dd-HH:mm" locale="pt,BR" />
		</tstamp>

		<property name="version_dir" value="/home/fabiano/www/versions" />
		<property name="signed_dir" value="/home/fabiano/www/jars" />
		<property name="app" value="thumbs" />
		<property name="dest_file" value="${version_dir}/${app}-${now_build}.jar" />

		<jar destfile="${dest_file}" filesetmanifest="mergewithoutmain" duplicate="preserve">
			<manifest>
				<attribute name="Main-Class" value="com.fabianonunes.solar.thumbs.ThumbsApp" />
				<attribute name="Class-Path" value="." />
			</manifest>
			<fileset dir="/home/fabiano/workspace/Thumbs/bin" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/commons/collections/commons-collections-3.2.1.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/commons/io/commons-io-1.4.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/commons/lang/commons-lang-2.4.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/commons/logging/commons-logging-1.1.1.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/iText/iText-2.1.7.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jai/jai-1.1.4/jai_codec.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jai/jai-1.1.4/jai_core.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jai/jai-1.1.4/mlibwrapper_jai.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/jai/io-1.1/imageio.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/jpedal/lgpl/jpedal_lgpl.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/swing-applications/appframework-1.0.3.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/swingworker/1.1/swing-worker-1.1.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jxlayer/jxlayer.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/swingx-1.0.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/Filters.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/jmock-1.1.0RC1.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/junit-4.5.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/MultipleGradientPaint.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/swing-layout.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/swing-worker.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/Dropbox/Classes/swingx/1.0/swingx-beaninfo-1.0.jar" />
			<fileset dir="/home/fabiano/workspace/Cleaner/bin" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/PDFBox-0.7.3/PDFBox-0.7.3.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/PDFBox-ASF/pdfbox-asf.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jbig2/jbig2.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/pdf-renderer/PDFRenderer.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/commons/cli/commons-cli-1.2.jar" />
			<zipfileset excludes="META-INF/*.SF" src="/home/fabiano/classes/jhlabs/Filters.jar" />
			<fileset dir="/home/fabiano/workspace/i2Commons/bin" />
			<fileset dir="/home/fabiano/workspace/FileSelector/bin" />
		</jar>

		<copy file="${dest_file}" tofile="/home/fabiano/${app}.jar">
		</copy>

		<property name="launch4j.dir" location="/opt/launch4j" />

		<taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask" classpath="${launch4j.dir}/launch4j.jar
		        :${launch4j.dir}/lib/xstream.jar" />

		<property name="dest_exe_file" value="${version_dir}/${app}-${now_build}.exe" />

		<launch4j configFile="./launch4j.xml" outfile="${dest_exe_file}" jar="${dest_file}" />

		<copy file="${dest_exe_file}" tofile="/home/fabiano/${app}.exe">
		</copy>

	</target>
</project>
